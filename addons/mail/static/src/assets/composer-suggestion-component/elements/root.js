/** @odoo-module **/

import { Define } from '@mail/define';

export default Define`
    {Record/insert}
        [Record/models]
            Element
        [Element/name]
            root
        [Element/model]
            ComposerSuggestionComponent
        [web.Element/tag]
            a
        [web.Element/class]
            dropdown-item
            {if}
                @record
                .{ComposerSuggestionComponent/isActive}
            .{then}
                active
        [web.Element/href]
            #
        [web.Element/title]
            {switch}
                @record
                .{ComposerSuggestionComponent/modelName}
            .{case}
                [CannedResponse]
                    {String/sprintf}
                        [0]
                            {Locale/text}
                                %s: %s
                        [1]
                            @record
                            .{ComposerSuggestionComponent/record}
                            .{CannedResponse/source}
                        [2]
                            @record
                            .{ComposerSuggestionComponent/record}
                            .{CannedResponse/substitution}
                [Thread]
                    @record
                    .{ComposerSuggestionComponent/record}
                    .{Thread/name}
                [ChannelCommand]
                    {String/sprintf}
                        [0]
                            {Locale/text}
                                %s: %s
                        [1]
                            @record
                            .{ComposerSuggestionComponent/record}
                            .{ChannelCommand/name}
                        [2]
                            @record
                            .{ComposerSuggestionComponent/record}
                            .{ChannelCommand/help}
                [Partner]
                    {if}
                        @record
                        .{ComposerSuggestionComponent/record}
                        .{Partner/email}
                    .{then}
                        {String/sprintf}
                            [0]
                                {String/sprintf}
                                    {Locale/text}
                                        %s (%s)
                            [1]
                                @record
                                .{ComposerSuggestionComponent/record}
                                .{Partner/nameOrDisplayName}
                            [2]
                                @record
                                .{ComposerSuggestionComponent/record}
                                .{Partner/email}
                    .{else}
                        @record
                        .{ComposerSuggestionComponent/record}
                        .{Partner/nameOrDisplayName}
        [web.Element/role]
            menuitem
        [Element/onClick]
            {web.Event/preventDefault}
                @ev
            {Record/update}
                [0]
                    @record
                    .{ComposerSuggestionComponent/composerView}
                [1]
                    [ComposerView/activeSuggestedRecord]
                        @record
                        .{ComposerSuggestionComponent/record}
            {ComposerView/insertSuggestion}
                @record
                .{ComposerSuggestionComponent/composerView}
            {ComposerView/closeSuggestions}
                @record
                .{ComposerSuggestionComponent/composerView}
            {if}
                @record
                .{ComposerSuggestionComponent/composerViewComponent}
            .{then}
                {ComposerViewComponent/focus}
                    @record
                    .{ComposerSuggestionComponent/composerViewComponent}
        [web.Element/style]
            [web.scss/display]
                flex
            [web.scss/width]
                {scss/map-get}
                    {scss/$sizes}
                    100
            [web.scss/padding]
                [0]
                    {scss/map-get}
                        {scss/$spacers}
                        2
                [1]
                    {scss/map-get}
                        {scss/$spacers}
                        4
`;
