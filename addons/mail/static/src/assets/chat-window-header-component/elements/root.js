/** @odoo-module **/

import { Define } from '@mail/define';

export default Define`
    {Record/insert}
        [Record/models]
            Element
        [Element/name]
            root
        [Element/model]
            ChatWindowHeaderComponent
        [Record/models]
            Hoverable
        [Element/onClick]
            {if}
                {Event/isHandled}
                    @ev
                    ChatWindowComponent/onClickCommand
                {Event/isHandled}
                    @ev
                    ChatWindowHeaderComponent.ClickShiftNext
                .{|}
                    {Event/isHandled}
                        @ev
                        ChatWindowHeaderComponent.ClickShiftPrev
                .{|}
                    {Event/isHandled}
                        @ev
                        ChatWindow/onClickHideMemberList
                .{|}
                    {Event/isHandled}
                        @ev
                        ChatWindow/onClickShowMemberList
            .{then}
                {break}
            {if}
                @record
                .{ChatWindowHeaderComponent/chatWindowHiddenMenuComponents}
            .{then}
                {ChatWindow/makeActive}
                    @record
                    .{ChatWindowHeaderComponent/chatWindow}
                {ChatWindowManager/closeHiddenMenu}
            {if}
                @record
                .{ChatWindowHeaderComponent/chatWindowComponents}
            .{then}
                {web.Event/stopPropagation}
                    @ev
                {if}
                    {Device/isMobile}
                .{then}
                    {break}
                {if}
                    @record
                    .{ChatWindowHeaderComponent/chatWindow}
                    .{ChatWindow/isFolded}
                .{then}
                    {ChatWindow/unfold}
                        @record
                        .{ChatWindowHeaderComponent/chatWindow}
                    {ChatWindow/focus}
                        @record
                        .{ChatWindowHeaderComponent/chatWindow}
                .{else}
                    {ChatWindowComponent/_saveThreadScrollTop}
                        @record
                        .{ChatWindowHeaderComponent/chatWindowComponent}
                    {ChatWindow/fold}
                        @record
                        .{ChatWindowHeaderComponent/chatWindow}
        [web.Element/style]
            [web.scss/display]
                flex
            [web.scss/align-items]
                center
            [web.scss/height]
                {scss/$o-mail-chat-window-header-height}
            {if}
                {Device/isMobile}
            .{then}
                [web.scss/height]
                    {scss/$o-mail-chat-window-header-height-mobile}
            [web.scss/background-color]
                {scss/$o-brand-odoo}
            [web.scss/color]
                {scss/$white}
            {if}
                {Device/isMobile}
                .{isFalsy}
            .{then}
                [web.scss/cursor]
                    pointer
                {if}
                    @field
                    .{web.Element/isHover}
                .{then}
                    {web.scss/selector}
                        [0]
                            .o-ChatWindowHeaderComponent-command
                        [1]
                            [web.scss/opacity]
                                0.7
                    {web.scss/selector}
                        [0]
                            .o-ChatWindowHeaderComponent-command:hover
                        [1]
                            [web.scss/opacity]
                                1
                {if}
                    @field
                    .{web.Element/isHover}
                    .{isFalsy}
                .{then}
                    {web.scss/selector}
                        [0]
                            .o-ChatWindowHeaderComponent-command
                        [1]
                            [web.scss/opacity]
                                0.5
`;
