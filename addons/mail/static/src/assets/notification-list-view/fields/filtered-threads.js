/** @odoo-module **/

import { Define } from '@mail/define';

export default Define`
    {Record/insert}
        [Record/models]
            Field
        [Field/name]
            filteredThreads
        [Field/model]
            NotificationListView
        [Field/type]
            many
        [Field/target]
            Thread
        [Field/compute]
            {switch}
                @record
                .{NotificationListView/filter}
            .{case}
                [mailbox]
                    {Record/all}
                        [Record/models]
                            Thread
                        [Thread/isPinned]
                            true
                        [Thread/model]
                            mail.box
                    .{Collection/sort}
                        {Record/insert}
                            [Record/models]
                                Function
                            [Function/in]
                                mailbox1
                                mailbox2
                            [Function/out]
                                {if}
                                    @mailbox1
                                    .{=}
                                        {Env/inbox}
                                .{then}
                                    -1
                                .{elif}
                                    @mailbox2
                                    .{=}
                                        {Env/inbox}
                                .{then}
                                    1
                                .{elif}
                                    @mailbox1
                                    .{=}
                                        {Env/starred}
                                .{then}
                                    -1
                                .{elif}
                                    @mailbox2
                                    .{=}
                                        {Env/starred}
                                .{then}
                                    1
                                .{else}
                                    :mailbox1Name
                                        @mailbox1
                                        .{Thread/displayName}
                                    :mailbox2Name
                                        @mailbox2
                                        .{Thread/displayName}
                                    {if}
                                        @mailbox1Name
                                        .{<}
                                            @mailbox2Name
                                    .{then}
                                        -1
                                    .{else}
                                        1
                [channel]
                    {Record/all}
                        [Record/models]
                            Thread
                        [Thread/channelType]
                            channel
                        [Thread/isPinned]
                            true
                        [Thread/model]
                            mail.channel
                    .{Collection/sort}
                        {Record/insert}
                            [Record/models]
                                Function
                            [Function/in]
                                c1
                                c2
                            [Function/out]
                                {if}
                                    @c1
                                    .{Thread/displayName}
                                    .{<}
                                        @c2
                                        .{Thread/displayName}
                                .{then}
                                    -1
                                .{else}
                                    1
                [chat]
                    {Record/all}
                        [Record/models]
                            Thread
                        [Thread/isChatChannel]
                            true
                        [Thread/isPinned]
                            true
                        [Thread/model]
                            mail.channel
                    .{Collection/sort}
                        {Record/insert}
                            [Record/models]
                                Function
                            [Function/in]
                                c1
                                c2
                            [Function/out]
                                {if}
                                    @c1
                                    .{Thread/displayName}
                                    .{<}
                                        @c2
                                        .{Thread/displayName}
                                .{then}
                                    -1
                                .{else}
                                    1
                [all]
                    {Dev/comment}
                        "All" filter is for channels and chats
                    {Record/all}
                        [Record/models]
                            Thread
                        [Thread/isPinned]
                            true
                        [Thread/model]
                            mail.channel
                    .{Collection/sort}
                        {Record/insert}
                            [Record/models]
                                Function
                            [Function/in]
                                c1
                                c2
                            [Function/out]
                                {if}
                                    @c1
                                    .{Thread/displayName}
                                    .{<}
                                        @c2
                                        .{Thread/displayName}
                                .{then}
                                    -1
                                .{else}
                                    1
                []
                    {Record/empty}
`;
