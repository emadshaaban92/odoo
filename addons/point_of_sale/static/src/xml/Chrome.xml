<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="Chrome" owl="1">
        <div class="pos" t-att-class="{ 'big-scrollbars': state.hasBigScrollBars }">
            <div class="pos-receipt-print"></div>
            <t t-if="state.uiState === 'READY'">
                <Navbar showCashMoveButton="showCashMoveButton"/>
                <div class="pos-content">
                    <div class="window">
                        <div class="subwindow">
                            <div class="subwindow-container">
                                <div class="subwindow-container-fix screens">
                                    <t isShown="!state.tempScreen" t-component="mainScreen.component"
                                       t-props="mainScreenProps" t-key="mainScreen.name" />
                                    <t t-if="state.tempScreen" t-component="state.tempScreen.component"
                                       t-props="state.tempScreen.props" t-key="state.tempScreen.name" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>

            <Transition visible="['LOADING', 'CLOSING'].includes(state.uiState)" name="'o-swing'" leaveDuration="800" t-slot-scope="transition">
                <div class="loader" t-att-class="transition.className">
                    <div class="loader-feedback">
                        <!-- spinner from https://loading.io/css/ -->
                        <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
                        <t t-if="state.loadingSkipButtonIsShown">
                            <h1 class="message">Connecting to devices</h1>
                            <div class="button skip" t-on-click="() => this.trigger('loading-skip-callback')">
                                Skip
                            </div>
                        </t>
                    </div>
                </div>
            </Transition>

            <!-- Allow popups to be visible at any state of the ui. -->
            <PosPopupController />

            <Transition name="'o-fade'" visible="state.notification.isShown" leaveDuration="200" t-slot-scope="transition">
                <Notification message="state.notification.message" duration="state.notification.duration" className="transition.className"/>
            </Transition>

        </div>
        <WithEnv env="wowlEnv">
            <MainComponentsContainer/>
        </WithEnv>
    </t>

</templates>
