<?xml version="1.0" encoding="UTF-8"?>
<templates>

    <t t-name="web.SelectMenu" owl="1">
        <div
            t-att-class="`o_select_menu border w-100 rounded-2 overflow-hidden ${props.class || ''}`"
        >
            <button 
                t-ref="togglerRef"
                t-att-class="`btn o_select_menu_toggler d-flex flex-row align-items-center flex-nowrap btn btn-secondary w-100 bg-light ${this.props.togglerClass || ''}`"
                t-on-click="() => this.dropdown.toggle()"
            >
                <div class="o_select_menu_toggler_slot">
                    <t t-if="!props.slots" t-esc="props.value" />
                    <t t-else="" t-slot="default" />
                </div>
                <span t-if="canClear()" t-on-click.stop="() => this.props.onSelect(null)" class="o_select_menu_toggler_clear p-0 m-0">
                    <i class="fa fa-times"></i>
                </span>
                <span class="o_select_menu_toggler_caret p-0 m-0">
                    <i class="fa fa-caret-down"></i>
                </span>
            </button>
            <div 
                t-if="dropdown.isOpen" 
                t-ref="dropdownRef"
                t-att-class="`o_select_menu_menu pt-0 ${state.direction || ''}`"
            >
                <div class="o_select_menu_input p-2 position-sticky top-0 start-0">
                    <input
                        type="text"
                        class="form-control"
                        t-ref="inputRef"
                        t-on-input="debouncedOnInput"
                        t-att-placeholder="props.searchPlaceholder"
                        autocomplete="off"
                        autocorrect="off"
                        spellcheck="false"
                    />
                </div>
                <t t-if="state.options.length === 0">
                    <span class="text-muted fst-italic ms-3">No result found</span>
                </t>
                <t t-foreach="state.displayedOptions" t-as="option" t-key="option_index">
                    <div t-if="option.isGroup" class="o_select_menu_group sticky-top bg-white px-3 mt-2 fst-italic fw-bolder">
                        <span t-esc="option.label" />
                        <hr class="bg-primary mt-2 mb-1" />
                    </div>
                    <DropdownItem
                        t-if="!option.isGroup"
                        onSelected="() => {this.props.onSelect(option.value); this.dropdown.close();}"
                        class="getItemClass(option)"
                    >
                        <t t-if="props.slots and props.slots.choice" t-slot="choice" t-props="option" />
                        <t t-else="">
                            <div class="o_select_menu_item_label text-wrap">
                                <t t-esc="option.label" />
                            </div>
                        </t>
                    </DropdownItem>
                </t>
            </div>
        </div>
    </t>

</templates>